<!DOCTYPE html>
<html>
  <head>
    <title>Boilerplate</title>
    <meta charset="utf-8" />
  </head>
  <body>

<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
    <script src="jquery.min.js"></script>
    <script src="underscore-min.js"></script>
    <script src="backbone-min.js"></script>
<!--    <script src="http://documentcloud.github.com/backbone/backbone-min.js"></script>-->
    <script type="text/javascript" charset="utf-8">
    var Meal = Backbone.Model.extend({
      defaults: {
        "appetizer": "caesar salad", // 开胃菜
        "entree": "hamburger", // 主菜
        "dessert": "cheesecake" // 餐后甜品
      }
    });
    var Lunch = new Meal({appetizer: "soup", entree: "pizze"});
    console.log(JSON.stringify(Lunch));

    var Todo = Backbone.Model.extend({
      initialize: function() {
        console.log('this model has been initialized');

        this.on("change", function() {
          console.log(" - Values for this model have changed.");
        });

        this.on("change:title", function(v) {
          console.log("title has been changed");
        });

        this.on("invalid", function(model, error) {
          console.log(error);
        };

      },
      defaults: {
        title: '',
        completed: false
      },

      validate: function(attributes) {
        if (attributes.title == undefined) {
          return "Remember to set a title for your todo.";
        }
      }

    });

    var myTodo = new Todo();
    console.log(myTodo.get('title'));
    myTodo.set('title', 'hi, i\'m a title');
    console.log(myTodo.toJSON());

    var Person = new Backbone.Model({name: 'Jeremy'});

    // validate the model name
    Person.validate = function(attrs) {
     if (!attrs.name) {
       return 'I need your name';
     }
    };

    Person.on("change:name", function() {console.log("name changed");});
    Person.set({name: "andrew"});
    console.log(Person.unset('name', {validate: true}));
    </script>
  </body>
</html>
